<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Distribution Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #1e293b;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 32px;
            text-align: center;
            margin-bottom: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .header h1 {
            margin: 0;
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .header p {
            margin: 12px 0 0 0;
            color: #64748b;
            font-size: 16px;
        }
        .stats-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-left: 4px solid;
        }
        .stat-card.low-end { border-left-color: #059669; }
        .stat-card.mid-end { border-left-color: #0284c7; }
        .stat-card.high-end { border-left-color: #7c3aed; }
        .stat-card.uncertain { border-left-color: #dc2626; }
        .stat-card h3 {
            margin: 0 0 8px 0;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #64748b;
            font-weight: 600;
        }
        .stat-card .value {
            font-size: 24px;
            font-weight: 700;
            font-family: 'SF Mono', Monaco, 'Consolas', monospace;
        }
        .stat-card.low-end .value { color: #059669; }
        .stat-card.mid-end .value { color: #0284c7; }
        .stat-card.high-end .value { color: #7c3aed; }
        .stat-card.uncertain .value { color: #dc2626; }
        .charts-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }
        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        .chart-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #374151;
            text-align: center;
        }
        .chart-wrapper {
            position: relative;
            height: 350px;
        }
        .full-width-chart {
            grid-column: 1 / -1;
        }
        .data-table {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        .table-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 24px;
            font-size: 18px;
            font-weight: 600;
        }
        .table-container {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 16px 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
            font-size: 14px;
        }
        th {
            background: #f8fafc;
            font-weight: 600;
            color: #374151;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .number-col {
            text-align: right;
            font-family: 'SF Mono', Monaco, 'Consolas', monospace;
        }
        .month-col {
            font-weight: 600;
            color: #1e293b;
        }
        .low-end { color: #059669; }
        .mid-end { color: #0284c7; }
        .high-end { color: #7c3aed; }
        .uncertain { color: #dc2626; }
        .total { 
            color: #1e293b; 
            font-weight: 600;
            background-color: #f1f5f9;
        }
        tr:hover {
            background-color: #f8fafc;
        }
        @media (max-width: 768px) {
            .charts-section {
                grid-template-columns: 1fr;
            }
            .stats-overview {
                grid-template-columns: repeat(2, 1fr);
            }
            .container {
                padding: 12px;
            }
            .header {
                padding: 20px;
            }
            .header h1 {
                font-size: 24px;
            }
            .chart-wrapper {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>User Distribution Analysis</h1>
            <p>Month-on-month breakdown of user categories and distribution patterns</p>
        </div>

        <div class="stats-overview">
            <div class="stat-card low-end">
                <h3>Total Low End</h3>
                <div class="value" id="totalLowEnd">-</div>
            </div>
            <div class="stat-card mid-end">
                <h3>Total Mid End</h3>
                <div class="value" id="totalMidEnd">-</div>
            </div>
            <div class="stat-card high-end">
                <h3>Total High End</h3>
                <div class="value" id="totalHighEnd">-</div>
            </div>
            <div class="stat-card uncertain">
                <h3>Total Uncertain</h3>
                <div class="value" id="totalUncertain">-</div>
            </div>
        </div>

        <div class="charts-section">
            <div class="chart-container">
                <div class="chart-title">Distribution Trends (Excluding Uncertain)</div>
                <div class="chart-wrapper">
                    <canvas id="trendChart"></canvas>
                </div>
            </div>
            <div class="chart-container">
                <div class="chart-title">Monthly Volume Breakdown</div>
                <div class="chart-wrapper">
                    <canvas id="volumeChart"></canvas>
                </div>
            </div>
        </div>

        <div class="charts-section">
            <div class="chart-container full-width-chart">
                <div class="chart-title">Complete Monthly Distribution (Stacked)</div>
                <div class="chart-wrapper">
                    <canvas id="stackedChart"></canvas>
                </div>
            </div>
        </div>

        <div class="data-table">
            <div class="table-header">Detailed Monthly Breakdown</div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th class="month-col">Month</th>
                            <th class="number-col">Low End Users</th>
                            <th class="number-col">Mid End Users</th>
                            <th class="number-col">High End Users</th>
                            <th class="number-col">Uncertain</th>
                            <th class="number-col">Total</th>
                        </tr>
                    </thead>
                    <tbody id="distributionTable">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // Month-on-month distribution data
        const distributionData = [
            { month: "September 2024", lowEnd: 241, midEnd: 5902, highEnd: 23845, uncertain: 678922, total: 708910 },
            { month: "October 2024", lowEnd: 23, midEnd: 332, highEnd: 4539, uncertain: 441431, total: 446325 },
            { month: "November 2024", lowEnd: 422, midEnd: 8989, highEnd: 21852, uncertain: 22565, total: 53828 },
            { month: "December 2024", lowEnd: 412, midEnd: 8096, highEnd: 15833, uncertain: 400066, total: 424407 },
            { month: "January 2025", lowEnd: 430, midEnd: 8757, highEnd: 16656, uncertain: 5162, total: 31005 },
            { month: "February 2025", lowEnd: 211, midEnd: 4611, highEnd: 8269, uncertain: 69152, total: 82243 },
            { month: "March 2025", lowEnd: 126, midEnd: 2771, highEnd: 5042, uncertain: 2917, total: 10856 },
            { month: "April 2025", lowEnd: 318, midEnd: 3014, highEnd: 4214, uncertain: 3251, total: 10797 },
            { month: "May 2025", lowEnd: 156, midEnd: 1485, highEnd: 2926, uncertain: 3574, total: 8141 },
            { month: "June 2025", lowEnd: 49, midEnd: 436, highEnd: 873, uncertain: 1182, total: 2540 }
        ];

        function formatNumber(num) {
            return num.toLocaleString();
        }

        function calculateTotals() {
            const totals = distributionData.reduce((acc, row) => {
                acc.lowEnd += row.lowEnd;
                acc.midEnd += row.midEnd;
                acc.highEnd += row.highEnd;
                acc.uncertain += row.uncertain;
                return acc;
            }, { lowEnd: 0, midEnd: 0, highEnd: 0, uncertain: 0 });

            document.getElementById('totalLowEnd').textContent = formatNumber(totals.lowEnd);
            document.getElementById('totalMidEnd').textContent = formatNumber(totals.midEnd);
            document.getElementById('totalHighEnd').textContent = formatNumber(totals.highEnd);
            document.getElementById('totalUncertain').textContent = formatNumber(totals.uncertain);
        }

        function createTrendChart() {
            const ctx = document.getElementById('trendChart').getContext('2d');
            const labels = distributionData.map(d => d.month.replace(' 2024', '').replace(' 2025', ''));
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Low End Users',
                        data: distributionData.map(d => d.lowEnd),
                        borderColor: '#059669',
                        backgroundColor: 'rgba(5, 150, 105, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        pointBackgroundColor: '#059669',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 5
                    }, {
                        label: 'Mid End Users',
                        data: distributionData.map(d => d.midEnd),
                        borderColor: '#0284c7',
                        backgroundColor: 'rgba(2, 132, 199, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        pointBackgroundColor: '#0284c7',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 5
                    }, {
                        label: 'High End Users',
                        data: distributionData.map(d => d.highEnd),
                        borderColor: '#7c3aed',
                        backgroundColor: 'rgba(124, 58, 237, 0.1)',
                        borderWidth: 3,
                        tension: 0.4,
                        pointBackgroundColor: '#7c3aed',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatNumber(value);
                                }
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            });
        }

        function createVolumeChart() {
            const ctx = document.getElementById('volumeChart').getContext('2d');
            const labels = distributionData.map(d => d.month.replace(' 2024', '').replace(' 2025', ''));
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Total Volume',
                        data: distributionData.map(d => d.total),
                        backgroundColor: 'rgba(99, 102, 241, 0.8)',
                        borderColor: '#6366f1',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatNumber(value);
                                }
                            }
                        }
                    }
                }
            });
        }

        function createStackedChart() {
            const ctx = document.getElementById('stackedChart').getContext('2d');
            const labels = distributionData.map(d => d.month.replace(' 2024', '').replace(' 2025', ''));
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Low End',
                        data: distributionData.map(d => d.lowEnd),
                        backgroundColor: '#059669',
                        borderWidth: 0
                    }, {
                        label: 'Mid End',
                        data: distributionData.map(d => d.midEnd),
                        backgroundColor: '#0284c7',
                        borderWidth: 0
                    }, {
                        label: 'High End',
                        data: distributionData.map(d => d.highEnd),
                        backgroundColor: '#7c3aed',
                        borderWidth: 0
                    }, {
                        label: 'Uncertain',
                        data: distributionData.map(d => d.uncertain),
                        backgroundColor: '#dc2626',
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' }
                    },
                    scales: {
                        x: { stacked: true },
                        y: {
                            stacked: true,
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatNumber(value);
                                }
                            }
                        }
                    }
                }
            });
        }

        function populateTable() {
            const tbody = document.getElementById('distributionTable');
            distributionData.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="month-col">${row.month}</td>
                    <td class="number-col low-end">${formatNumber(row.lowEnd)}</td>
                    <td class="number-col mid-end">${formatNumber(row.midEnd)}</td>
                    <td class="number-col high-end">${formatNumber(row.highEnd)}</td>
                    <td class="number-col uncertain">${formatNumber(row.uncertain)}</td>
                    <td class="number-col total">${formatNumber(row.total)}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Initialize dashboard
        calculateTotals();
        populateTable();
        
        setTimeout(() => {
            createTrendChart();
            createVolumeChart();
            createStackedChart();
        }, 100);
    </script>
</body>
</html>